#학생1 시작

from selenium import webdriver
import chromedriver_autoinstaller
from selenium.webdriver.chrome.options import Options
from selenium.webdriver.common.by import By
from selenium.webdriver.support.ui import WebDriverWait
from selenium.webdriver.support import expected_conditions as EC
from bs4 import BeautifulSoup
import time
import pandas as pd

options = Options()
options.add_argument('headless');

driver = webdriver.Chrome(options=options)

time.sleep(3)

pr_name = []

for i in range(1, 2):

    print('----- Start Page : {}'.format(i), '------')

    driver.get('http://browse.gmarket.co.kr/list?category=300008236&f=d:f'.format(i))

    time.sleep(3)

    html = driver.page_source

    soup = BeautifulSoup(html, 'html.parser')

    names = soup.select('span.text__item')


    for name in names:
        pr_name.append(name.text.strip())
    

    time.sleep(3)

    print('----- Finish Page : {}'.format(i), '------')

driver.close()
print('크롤링 완료')

print(len(pr_name))

#df = pd.DataFrame({'제품명' : pr_name})
df=pd.DataFrame([x for x in zip(pr_name)],  columns=['제품명'])
pd.set_option('display.max_rows', None)
pd.set_option('display.max_columns', None)
print(df)


#학생2 시작


options = Options()
options.add_argument('headless');

driver = webdriver.Chrome(options=options)

time.sleep(3)

pr_name = []
pr_price = []
pr_buy = []


for i in range(1, 2):

    print('----- Start Page : {}'.format(i), '------')

    driver.get('http://browse.gmarket.co.kr/list?category=300008236&f=d:f'.format(i))

    time.sleep(3)

    html = driver.page_source

    soup = BeautifulSoup(html, 'html.parser')
    
    names = soup.select('span.text__item')
    prices = soup.select('strong.text.text__value')
    buys = soup.select('li.list-item.list-item__pay-count > span.text')


    for name in names:
        pr_name.append(name.text.strip())
    for price in prices:
        pr_price.append(price.text.strip())
    for buy in buys:
        pr_buy.append(buy.text.strip())


    time.sleep(3)

    print('----- Finish Page : {}'.format(i), '------')

driver.close()
print('크롤링 완료')

print(len(pr_name))
print(len(pr_price))
print(len(pr_buy))

#df = pd.DataFrame({'제품명' : pr_name, '가격' : pr_price, '구매건수' : pr_buy})
df=pd.DataFrame([x for x in zip(pr_name,pr_price,pr_buy)],  columns=['제품명','가격', '구매건수'])
pd.set_option('display.max_rows', None)
pd.set_option('display.max_columns', None)
print(df)
